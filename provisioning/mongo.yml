- name: MongoDB | Import the public key used by the package management system
  apt_key: keyserver=keyserver.ubuntu.com id=7F0CEB10
- name: MongoDB | Create a list file
  lineinfile: dest=/etc/apt/sources.list.d/mongodb-org-3.6.list line="deb http://repo.mongodb.org/apt/ubuntu xenial/mongodb-org/3.6 multiverse" state=present create=yes
- name: MongoDB | Install the packages
  apt: name={{ item }}={{ mongodb_version }} state=present update_cache=yes allow_unauthenticated=yes
  with_items:
    - mongodb-org
    - mongodb-org-server
    - mongodb-org-shell
    - mongodb-org-mongos
    - mongodb-org-tools
- name: MongoDB | Delete local bindIp
  lineinfile: "dest=/etc/mongod.conf regexp='^  bindIp: 127.0.0.1' state=absent"
- name: MongoDB | Listen to all ip
  lineinfile: "dest=/etc/mongod.conf insertafter='^net:' line='  bindIp: 0.0.0.0' state=present"
